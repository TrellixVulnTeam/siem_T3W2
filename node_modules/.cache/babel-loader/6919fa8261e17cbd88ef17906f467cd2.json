{"remainingRequest":"D:\\project\\prj_scms\\branch_ducdm\\tkmsiem\\node_modules\\babel-loader\\lib\\index.js!D:\\project\\prj_scms\\branch_ducdm\\tkmsiem\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\project\\prj_scms\\branch_ducdm\\tkmsiem\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\prj_scms\\branch_ducdm\\tkmsiem\\src\\views\\task\\KanBoard.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\prj_scms\\branch_ducdm\\tkmsiem\\src\\views\\task\\KanBoard.vue","mtime":1640353310878},{"path":"D:\\project\\prj_scms\\branch_ducdm\\tkmsiem\\babel.config.js","mtime":1640353093300},{"path":"D:\\project\\prj_scms\\branch_ducdm\\tkmsiem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\prj_scms\\branch_ducdm\\tkmsiem\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\project\\prj_scms\\branch_ducdm\\tkmsiem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\prj_scms\\branch_ducdm\\tkmsiem\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBDQXZhdGFyIGZyb20gJ0AvY29tcG9uZW50cy9hdmF0YXIvQ0F2YXRhcic7CmltcG9ydCBUYXNrRm9ybSBmcm9tICdAL2NvbXBvbmVudHMvZm9ybS9UYXNrRm9ybSc7CmltcG9ydCBTb3J0YWJsZSBmcm9tICdzb3J0YWJsZWpzJzsKaW1wb3J0IFRvb2x0aXBNaXhpbiBmcm9tICdAL21peGlucy9Ub29sdGlwJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdLYW5Cb2FyZCcsCiAgY29tcG9uZW50czogewogICAgQ0F2YXRhcjogQ0F2YXRhciwKICAgIFRhc2tGb3JtOiBUYXNrRm9ybQogIH0sCiAgbWl4aW5zOiBbVG9vbHRpcE1peGluXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcHJvamVjdF9pZDogMSwKICAgICAgc2hvd0RpYWxvZzogZmFsc2UsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBpdGVtczogW10sCiAgICAgIHNlbGVjdGVkSXRlbTogbnVsbCwKICAgICAgYWN0aW9uczogW3sKICAgICAgICB0ZXh0OiAnRWRpdCBJdGVtJywKICAgICAgICBpY29uOiAnbWRpLXBlbmNpbCcsCiAgICAgICAgY2xpY2s6IHRoaXMuaGFuZGxlRWRpdEl0ZW0KICAgICAgfSwgewogICAgICAgIHRleHQ6ICdEZWxldGUgSXRlbScsCiAgICAgICAgaWNvbjogJ21kaS1jbG9zZScsCiAgICAgICAgY2xpY2s6IHRoaXMuaGFuZGxlRGVsZXRlSXRlbQogICAgICB9XQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBnZXRUYXNrU3RhdHVzOiBmdW5jdGlvbiBnZXRUYXNrU3RhdHVzKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1sndGFzay9nZXRUYXNrU3RhdHVzJ107CiAgICB9LAogICAgZ2V0UHJvamVjdExpc3Q6IGZ1bmN0aW9uIGdldFByb2plY3RMaXN0KCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1sndGFzay9nZXRQcm9qZWN0TGlzdCddOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3Rhc2svZmV0Y2hQcm9qZWN0Jyk7CiAgICB0aGlzLmZldGNoVGFzaygpOwogICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5nZXRUYXNrU3RhdHVzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBuZXcgU29ydGFibGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3Rhc2stbGlzdF9fIi5jb25jYXQoaXRlbS52YWx1ZSkpLCB7CiAgICAgICAgICBncm91cDogJ3NoYXJlZCcsCiAgICAgICAgICBhbmltYXRpb246IDE1MCwKICAgICAgICAgIG9uRW5kOiBmdW5jdGlvbiBvbkVuZChlKSB7CiAgICAgICAgICAgIHZhciB0YXNrSWQgPSBlLml0ZW0uZGF0YXNldC5pZDsKICAgICAgICAgICAgdmFyIHN0YXR1cyA9IGUudG8uZGF0YXNldC5zdGF0dXM7CgogICAgICAgICAgICBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3Rhc2svdXBkYXRlVGFza1N0YXR1cycsIHsKICAgICAgICAgICAgICBpZDogdGFza0lkLAogICAgICAgICAgICAgIHN0YXR1czogc3RhdHVzCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgZmV0Y2hUYXNrOiBmdW5jdGlvbiBmZXRjaFRhc2soKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5pdGVtcyA9IFtdOwogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICB2YXIgcXVlcnkgPSB7CiAgICAgICAgJ2ZpbHRlcltwcm9qZWN0X2lkXSc6IHRoaXMucHJvamVjdF9pZAogICAgICB9OwogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndGFzay9mZXRjaFRhc2snLCBxdWVyeSkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIF90aGlzMi5pdGVtcyA9IHJlc3AuZGF0YTsKICAgICAgICBfdGhpczIubG9hZGluZyA9IGZhbHNlOwogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgY29tcHV0ZUF2YXRhcjogZnVuY3Rpb24gY29tcHV0ZUF2YXRhcih1c2VybmFtZSkgewogICAgICB2YXIgYXZhdGFyID0gdGhpcy5nZXRVc2VybmFtZSA9PT0gdXNlcm5hbWUgPyB0aGlzLmdldEF2YXRhciA6ICcnOwogICAgICByZXR1cm4gYXZhdGFyOwogICAgfSwKICAgIGhhbmRsZVByb2plY3RDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZVByb2plY3RDaGFuZ2UoKSB7CiAgICAgIHRoaXMuZmV0Y2hUYXNrKCk7CiAgICB9LAogICAgZ2V0VGFza0J5U3RhdHVzOiBmdW5jdGlvbiBnZXRUYXNrQnlTdGF0dXMoc3RhdHVzKSB7CiAgICAgIHJldHVybiB0aGlzLml0ZW1zLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLnN0YXR1cyA9PT0gc3RhdHVzOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVDcmVhdGVUYXNrOiBmdW5jdGlvbiBoYW5kbGVDcmVhdGVUYXNrKCkgewogICAgICB0aGlzLnNlbGVjdGVkSXRlbSA9IG51bGw7CiAgICAgIHRoaXMuc2hvd0RpYWxvZyA9IHRydWU7CiAgICB9LAogICAgaGFuZGxlRWRpdEl0ZW06IGZ1bmN0aW9uIGhhbmRsZUVkaXRJdGVtKGl0ZW0pIHsKICAgICAgdGhpcy5zZWxlY3RlZEl0ZW0gPSBpdGVtOwogICAgICB0aGlzLnNob3dEaWFsb2cgPSB0cnVlOwogICAgfSwKICAgIGhhbmRsZURlbGV0ZUl0ZW06IGZ1bmN0aW9uIGhhbmRsZURlbGV0ZUl0ZW0oX3JlZikgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBpZCA9IF9yZWYuaWQ7CgogICAgICBpZiAod2luZG93LmNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB0byBkZWxldGUgdGhpcycpKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3Rhc2svZGVsZXRlVGFzaycsIGlkKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMy5pdGVtcyA9IF90aGlzMy5pdGVtcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgcmV0dXJuIGl0ZW0uaWQgIT0gaWQ7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZUZvcm1TdWNjZXNzOiBmdW5jdGlvbiBoYW5kbGVGb3JtU3VjY2VzcygpIHsKICAgICAgdGhpcy5mZXRjaFRhc2soKTsKICAgICAgdGhpcy5zaG93RGlhbG9nID0gZmFsc2U7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["KanBoard.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"kanboard\">\r\n    <v-container>\r\n      <v-row>\r\n        <v-col :cols=\"12\">\r\n          <v-autocomplete\r\n            v-model=\"project_id\"\r\n            :items=\"getProjectList\"\r\n            label=\"Select Project\"\r\n            @change=\"handleProjectChange\"\r\n          >\r\n          </v-autocomplete>\r\n        </v-col>\r\n        <template v-for=\"col in getTaskStatus\">\r\n          <v-col :key=\"col.value\">\r\n            <v-card :loading=\"loading\">\r\n              <v-toolbar flat>\r\n                <v-toolbar-title>{{ col.text }} </v-toolbar-title>\r\n                <v-spacer />\r\n                <v-btn icon @click=\"handleCreateTask\">\r\n                  <v-icon>mdi-plus</v-icon>\r\n                </v-btn>\r\n              </v-toolbar>\r\n              <v-divider />\r\n              <v-card-text :id=\"'task-list__' + col.value\" class=\"task-list\" :data-status=\"col.value\">\r\n                <template v-for=\"task in getTaskByStatus(col.value)\">\r\n                  <div :key=\"task.id\" :data-id=\"task.id\" class=\"task-list__item\">\r\n                    <v-list-item :value=\"task\">\r\n                      <v-list-item-avatar>\r\n                        <v-icon v-if=\"!task.owner\">mdi-account-circle</v-icon>\r\n                        <c-avatar v-else :size=\"32\" :username=\"task.owner\" :src=\"computeAvatar(task.owner)\" />\r\n                      </v-list-item-avatar>\r\n                      <v-list-item-content>\r\n                        <v-list-item-title> #{{ task.id }} {{ task.name }}</v-list-item-title>\r\n                        <v-list-item-subtitle>{{ task.description }}</v-list-item-subtitle>\r\n                      </v-list-item-content>\r\n                      <v-list-item-action>\r\n                        <v-icon small @click.stop=\"handleEditItem(task)\">mdi-pencil</v-icon>\r\n                      </v-list-item-action>\r\n                    </v-list-item>\r\n                  </div>\r\n                </template>\r\n              </v-card-text>\r\n            </v-card>\r\n          </v-col>\r\n        </template>\r\n      </v-row>\r\n    </v-container>\r\n    <v-dialog v-model=\"showDialog\" scrollable width=\"840\">\r\n      <task-form :item=\"selectedItem\" @form:success=\"handleFormSuccess\" />\r\n    </v-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CAvatar from '@/components/avatar/CAvatar'\r\nimport TaskForm from '@/components/form/TaskForm'\r\nimport Sortable from 'sortablejs'\r\nimport TooltipMixin from '@/mixins/Tooltip'\r\nexport default {\r\n  name: 'KanBoard',\r\n  components: {\r\n    CAvatar,\r\n    TaskForm,\r\n  },\r\n  mixins: [TooltipMixin],\r\n  data() {\r\n    return {\r\n      project_id: 1,\r\n      showDialog: false,\r\n      loading: false,\r\n      items: [],\r\n      selectedItem: null,\r\n      actions: [\r\n        {\r\n          text: 'Edit Item',\r\n          icon: 'mdi-pencil',\r\n          click: this.handleEditItem,\r\n        },\r\n        {\r\n          text: 'Delete Item',\r\n          icon: 'mdi-close',\r\n          click: this.handleDeleteItem,\r\n        },\r\n      ],\r\n    }\r\n  },\r\n  computed: {\r\n    getTaskStatus () {\r\n      return this.$store.getters['task/getTaskStatus']\r\n    },\r\n    getProjectList () {\r\n      return this.$store.getters['task/getProjectList']\r\n    }\r\n  },\r\n  created() {\r\n    this.$store.dispatch('task/fetchProject')\r\n    this.fetchTask()\r\n    this.$nextTick(() => {\r\n      this.getTaskStatus.forEach((item) => {\r\n        new Sortable(document.querySelector(`#task-list__${item.value}`), {\r\n          group: 'shared',\r\n          animation: 150,\r\n          onEnd: (e) => {\r\n            const taskId = e.item.dataset.id\r\n            const status = e.to.dataset.status\r\n            this.$store.dispatch('task/updateTaskStatus', { id: taskId, status: status })\r\n          },\r\n        })\r\n      })\r\n    })\r\n  },\r\n  methods: {\r\n    fetchTask() {\r\n      this.items = []\r\n      this.loading = true\r\n      const query = {\r\n        'filter[project_id]': this.project_id,\r\n      }\r\n      this.$store\r\n        .dispatch('task/fetchTask', query)\r\n        .then((resp) => {\r\n          this.items = resp.data\r\n          this.loading = false\r\n        })\r\n        .catch(() => {\r\n          this.loading = false\r\n        })\r\n    },\r\n    computeAvatar(username) {\r\n      const avatar = this.getUsername === username ? this.getAvatar : ''\r\n      return avatar\r\n    },\r\n    handleProjectChange() {\r\n      this.fetchTask()\r\n    },\r\n    getTaskByStatus(status) {\r\n      return this.items.filter((item) => item.status === status)\r\n    },\r\n    handleCreateTask() {\r\n      this.selectedItem = null\r\n      this.showDialog = true\r\n    },\r\n    handleEditItem(item) {\r\n      this.selectedItem = item\r\n      this.showDialog = true\r\n    },\r\n    handleDeleteItem({ id }) {\r\n      if (window.confirm('Are you sure to delete this')) {\r\n        this.$store.dispatch('task/deleteTask', id).then(() => {\r\n          this.items = this.items.filter((item) => item.id != id)\r\n        })\r\n      }\r\n    },\r\n    handleFormSuccess() {\r\n      this.fetchTask()\r\n      this.showDialog = false\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"sass\" scoped>\r\n.task-list\r\n  min-height: 500px\r\n  padding: 0\r\n  &__item\r\n    border-bottom: 1px solid #eee\r\n  .sortable-chosen,\r\n  .sortable-ghost\r\n    border: 1px dotted var(--v-primary-base)\r\n    background: #eee\r\n</style>\r\n"],"sourceRoot":"src/views/task"}]}