{"remainingRequest":"D:\\project\\prj_scms\\branch_ducdm\\tkmsiem\\node_modules\\babel-loader\\lib\\index.js!D:\\project\\prj_scms\\branch_ducdm\\tkmsiem\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\project\\prj_scms\\branch_ducdm\\tkmsiem\\src\\util\\request.js","dependencies":[{"path":"D:\\project\\prj_scms\\branch_ducdm\\tkmsiem\\src\\util\\request.js","mtime":1640353914831},{"path":"D:\\project\\prj_scms\\branch_ducdm\\tkmsiem\\babel.config.js","mtime":1640353093300},{"path":"D:\\project\\prj_scms\\branch_ducdm\\tkmsiem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\prj_scms\\branch_ducdm\\tkmsiem\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\project\\prj_scms\\branch_ducdm\\tkmsiem\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOyAvLyBjcmVhdGUgYXhpb3MKCnZhciBzZXJ2aWNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfU0lFTSwKICAvLyBhcGkgYmFzZV91cmwKICB0aW1lb3V0OiA1MDAwMCwKICAvLyB0aW1lb3V0LAogIGhlYWRlcnM6IHsKICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicKICB9Cn0pOwoKdmFyIGVyciA9IGZ1bmN0aW9uIGVycihlcnJvcikgewogIHZhciBfZXJyb3IkcmVzcG9uc2UgPSBlcnJvci5yZXNwb25zZSwKICAgICAgc3RhdHVzID0gX2Vycm9yJHJlc3BvbnNlLnN0YXR1cywKICAgICAgZGF0YSA9IF9lcnJvciRyZXNwb25zZS5kYXRhOwogIHZhciBlcnJvcnMgPSBkYXRhLmVycm9yczsKICB2YXIgbWVzc2FnZSA9IFtdOwoKICBmb3IgKHZhciBmaWVsZCBpbiBlcnJvcnMpIHsKICAgIG1lc3NhZ2UucHVzaChlcnJvcnNbZmllbGRdKTsKICB9CgogIGNvbnNvbGUubG9nKGRhdGEpOwoKICBzd2l0Y2ggKHN0YXR1cykgewogICAgY2FzZSA0MDA6CiAgICAgIHN0b3JlLmNvbW1pdCgnYXBwL1NIT1dfU05BQ0tCQVInLCB7CiAgICAgICAgdGV4dDogZGF0YS5tZXNzYWdlLAogICAgICAgIGNvbG9yOiAnZXJyb3InCiAgICAgIH0sIHsKICAgICAgICByb290OiB0cnVlCiAgICAgIH0pOwogICAgICBicmVhazsKCiAgICBjYXNlIDQyMjoKICAgICAgc3RvcmUuY29tbWl0KCdhcHAvU0hPV19TTkFDS0JBUicsIHsKICAgICAgICB0ZXh0OiBtZXNzYWdlLAogICAgICAgIGNvbG9yOiAnZXJyb3InCiAgICAgIH0pOwogICAgICBicmVhazsKCiAgICBjYXNlIDQwMToKICAgICAgc3RvcmUuY29tbWl0KCdhcHAvU0hPV19TTkFDS0JBUicsIHsKICAgICAgICB0ZXh0OiBkYXRhLm1lc3NhZ2UsCiAgICAgICAgY29sb3I6ICdlcnJvcicKICAgICAgfSwgewogICAgICAgIHJvb3Q6IHRydWUKICAgICAgfSk7CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgNDAzOgogICAgICBzdG9yZS5jb21taXQoJ2FwcC9TSE9XX1NOQUNLQkFSJywgewogICAgICAgIHRleHQ6IG1lc3NhZ2UsCiAgICAgICAgY29sb3I6ICdlcnJvcicKICAgICAgfSk7CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgNTAwOgogICAgICBzdG9yZS5jb21taXQoJ2FwcC9TSE9XX1NOQUNLQkFSJywgewogICAgICAgIHRleHQ6ICdzZXJ2ZXIgZXJyb3InLAogICAgICAgIGNvbG9yOiAnZXJyb3InCiAgICAgIH0sIHsKICAgICAgICByb290OiB0cnVlCiAgICAgIH0pOwogICAgICBicmVhazsKCiAgICBkZWZhdWx0OgogICAgICBicmVhazsKICB9CgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn07IC8vIHJlcXVlc3QgaW50ZXJjZXB0b3IKCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgY29uZmlnLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nOwoKICBpZiAoc3RvcmUuZ2V0dGVyc1snYXV0aC9nZXRBY2Nlc3NUb2tlbiddICYmIGNvbmZpZy51cmwgIT09ICIvc2VjdXJpdHkvdXNlci9hdXRoZW50aWNhdGUiKSB7CiAgICAvLyBhZGQgbmV3IHRva2VuIGludG8gYXV0aG9yaXphdGlvbgogICAgY29uZmlnLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9ICdCZWFyZXIgJyArIHN0b3JlLmdldHRlcnNbJ2F1dGgvZ2V0QWNjZXNzVG9rZW4nXTsKICB9CgogIHJldHVybiBjb25maWc7Cn0sIGVycik7IC8vIHJlc3BvbnNlIGludGVyY2VwdG9yCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKF9yZWYpIHsKICB2YXIgZGF0YSA9IF9yZWYuZGF0YSwKICAgICAgY29uZmlnID0gX3JlZi5jb25maWc7CgogIGlmIChbJ3B1dCcsICdwb3N0JywgJ2RlbGV0ZScsICdwYXRjaCddLmluY2x1ZGVzKGNvbmZpZy5tZXRob2QpICYmIGRhdGEubWV0YSkgewogICAgc3RvcmUuY29tbWl0KCdTSE9XX1NOQUNLQkFSJywgewogICAgICB0ZXh0OiAnc3VjY2VzcycsCiAgICAgIGNvbG9yOiAnc3VjY2VzcycKICAgIH0pOwogIH0KCiAgcmV0dXJuIGRhdGE7Cn0sIGVycik7CmV4cG9ydCBkZWZhdWx0IHNlcnZpY2U7"},{"version":3,"sources":["D:/project/prj_scms/branch_ducdm/tkmsiem/src/util/request.js"],"names":["axios","store","service","create","baseURL","process","env","VUE_APP_BASE_SIEM","timeout","headers","err","error","response","status","data","errors","message","field","push","console","log","commit","text","color","root","Promise","reject","interceptors","request","use","config","getters","url","includes","method","meta"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nimport store from '@/store'\r\n// create axios\r\nconst service = axios.create({\r\n  baseURL: process.env.VUE_APP_BASE_SIEM, // api base_url\r\n  timeout: 50000, // timeout,\r\n  headers: { 'Access-Control-Allow-Origin': '*' },\r\n})\r\n\r\nconst err = (error) => {\r\n  const { status, data } = error.response\r\n  const { errors } = data\r\n  let message = []\r\n  for (let field in errors) {\r\n    message.push(errors[field])\r\n  }\r\n  console.log(data)\r\n  switch (status) {\r\n    case 400:\r\n      store.commit('app/SHOW_SNACKBAR', { text: data.message, color: 'error' }, { root: true })\r\n      break\r\n    case 422:\r\n      store.commit('app/SHOW_SNACKBAR', { text: message, color: 'error' })\r\n      break\r\n    case 401:\r\n      store.commit('app/SHOW_SNACKBAR', { text: data.message, color: 'error' }, { root: true })\r\n      break\r\n    case 403:\r\n      store.commit('app/SHOW_SNACKBAR', { text: message, color: 'error' })\r\n      break\r\n    case 500:\r\n      store.commit('app/SHOW_SNACKBAR', { text: 'server error', color: 'error' }, { root: true })\r\n      break\r\n    default:\r\n      break\r\n  }\r\n  return Promise.reject(error)\r\n}\r\n\r\n// request interceptor\r\nservice.interceptors.request.use((config) => {\r\n  config.headers['Content-Type'] = 'application/json'\r\n  if (store.getters['auth/getAccessToken'] && config.url !== \"/security/user/authenticate\") {\r\n    // add new token into authorization\r\n    config.headers['Authorization'] = 'Bearer ' + store.getters['auth/getAccessToken']\r\n  }\r\n  return config\r\n}, err)\r\n\r\n// response interceptor\r\n\r\nservice.interceptors.response.use(({ data, config }) => {\r\n  if (['put', 'post', 'delete', 'patch'].includes(config.method) && data.meta) {\r\n    store.commit('SHOW_SNACKBAR', { text: 'success', color: 'success' })\r\n  }\r\n  return data\r\n}, err)\r\n\r\nexport default service\r\n"]}]}