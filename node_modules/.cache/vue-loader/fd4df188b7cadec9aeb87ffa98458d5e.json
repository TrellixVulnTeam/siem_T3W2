{"remainingRequest":"D:\\project\\prj_scms\\branch_ducdm\\tkmsiem\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\prj_scms\\branch_ducdm\\tkmsiem\\node_modules\\@tookit\\vma\\lib\\components\\cascader\\VCascader.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\prj_scms\\branch_ducdm\\tkmsiem\\node_modules\\@tookit\\vma\\lib\\components\\cascader\\VCascader.vue","mtime":499162500000},{"path":"D:\\project\\prj_scms\\branch_ducdm\\tkmsiem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\prj_scms\\branch_ducdm\\tkmsiem\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\project\\prj_scms\\branch_ducdm\\tkmsiem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\prj_scms\\branch_ducdm\\tkmsiem\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGZpbmRQYXRoIH0gZnJvbSAnbi1hcnktdHJlZScKaW1wb3J0IHsgVk1lbnUsIFZUZXh0RmllbGQsIFZTaGVldCB9IGZyb20gJ3Z1ZXRpZnkvbGliL2NvbXBvbmVudHMvJwppbXBvcnQgVkNhc2NhZGVySXRlbSBmcm9tICcuL1ZDYXNjYWRlckl0ZW0udnVlJwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1ZDYXNjYWRlcicsCiAgY29tcG9uZW50czogewogICAgVk1lbnUsCiAgICBWVGV4dEZpZWxkLAogICAgVlNoZWV0LAogICAgVkNhc2NhZGVySXRlbSwKICB9LAogIHByb3BzOiB7CiAgICBpdGVtczogQXJyYXksCiAgICBsYWJlbDogU3RyaW5nLAogICAgcGxhY2Vob2xkZXI6IFN0cmluZywKICAgIG5hbWU6IFN0cmluZywKICAgIGRlbnNlOiBCb29sZWFuLAogICAgb3V0bGluZWQ6IEJvb2xlYW4sCiAgICBtdWx0aXBsZTogQm9vbGVhbiwKICAgIGNsZWFyYWJsZTogQm9vbGVhbiwKICAgIHJldHVybk9iamVjdDogQm9vbGVhbiwKICAgIGNoaWxkcmVuS2V5OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2NoaWxkcmVuJywKICAgIH0sCiAgICBzZXBlcmF0b3I6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnIC8gJywKICAgIH0sCiAgICBpdGVtVGV4dDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICd0ZXh0JywKICAgIH0sCiAgICBpdGVtVmFsdWU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAndmFsdWUnLAogICAgfSwKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IFtBcnJheSwgTnVtYmVyLCBTdHJpbmddLAogICAgICBkZWZhdWx0OiAoKSA9PiBbXSwKICAgIH0sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd01lbnU6IGZhbHNlLAogICAgICBjdXJyZW50RGVwdGg6IDAsCiAgICAgIHNlbGVjdGVkSXRlbXM6IFtdLAogICAgICBjaGlsZHJlbnM6IFt0aGlzLml0ZW1zXSwgLy8gW1tdLFtdXQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGlucHV0VmFsdWUoKSB7CiAgICAgIGNvbnN0IGlucHV0ID0gdGhpcy5zZWxlY3RlZEl0ZW1zCiAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbSAhPT0gbnVsbCkKICAgICAgICAubWFwKChpdGVtKSA9PiBpdGVtW3RoaXMuaXRlbVRleHRdKQogICAgICAgIC5qb2luKHRoaXMuc2VwZXJhdG9yKQogICAgICByZXR1cm4gaW5wdXQKICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgdmFsdWU6IHsKICAgICAgaGFuZGxlcih2YWwpIHsKICAgICAgICB0aGlzLmluaXRWYWx1ZSh2YWwpCiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0VmFsdWUodmFsKSB7CiAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtcyA9IHRoaXMuZmluZFBhdGgodmFsKQogICAgfSwKCiAgICBmaW5kUGF0aCh2YWwpIHsKICAgICAgaWYgKHZhbCkgewogICAgICAgIGxldCBwYXRoID0gW10KICAgICAgICB0aGlzLml0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICAgIGNvbnN0IHRlbXAgPSBmaW5kUGF0aChpdGVtLCB2YWwsIHsKICAgICAgICAgICAgdmFsdWU6IHRoaXMuaXRlbVZhbHVlLAogICAgICAgICAgICBjaGlsZHJlbjogdGhpcy5jaGlsZHJlbktleSwKICAgICAgICAgIH0pCiAgICAgICAgICBpZiAodGVtcC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHBhdGggPSB0ZW1wCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICByZXR1cm4gcGF0aAogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBbXQogICAgICB9CiAgICB9LAogICAgY29tcHV0ZVZhbHVlKCkgewogICAgICBjb25zdCB2YWx1ZSA9IHRoaXMubXVsdGlwbGUKICAgICAgICA/IHRoaXMuc2VsZWN0ZWRJdGVtcy5tYXAoKGl0ZW0pID0+IGl0ZW1bdGhpcy5pdGVtVmFsdWVdKQogICAgICAgIDogdGhpcy5zZWxlY3RlZEl0ZW1zW3RoaXMuc2VsZWN0ZWRJdGVtcy5sZW5ndGggLSAxXVt0aGlzLml0ZW1WYWx1ZV0KICAgICAgcmV0dXJuIHZhbHVlCiAgICB9LAogICAgLy8gcmVidWlsZAogICAgaGFuZGxlSXRlbVNlbGVjdCh7IGl0ZW0sIGRlcHRoIH0pIHsKICAgICAgY29uc3QgY2hpbGRyZW5zID0gaXRlbVt0aGlzLmNoaWxkcmVuS2V5XQogICAgICB0aGlzLiRzZXQodGhpcy5zZWxlY3RlZEl0ZW1zLCBkZXB0aCwgaXRlbSkKICAgICAgLy8gcmVzZXQgYWxsIGdyYW5kIGNoaWxkCiAgICAgIGNvbnN0IGdyYW5kRGVwID0gZGVwdGggKyAxCiAgICAgIHRoaXMuJHNldCh0aGlzLmNoaWxkcmVucywgZ3JhbmREZXAsIGNoaWxkcmVucykgLy8gbWFrZSBhcnJheSByZWFjdGl2ZQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY2hpbGRyZW5zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKGkgPiBncmFuZERlcCkgewogICAgICAgICAgdGhpcy5jaGlsZHJlbnNbaV0gPSBbXQogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLmNoaWxkcmVucyA9IHRoaXMuY2hpbGRyZW5zLmZpbHRlcigoaXRlbSkgPT4gaXRlbSAmJiBpdGVtLmxlbmd0aCA+IDApCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zZWxlY3RlZEl0ZW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKGkgPiBkZXB0aCkgewogICAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW1zW2ldID0gbnVsbAogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLnNlbGVjdGVkSXRlbXMgPSB0aGlzLnNlbGVjdGVkSXRlbXMuZmlsdGVyKChpdGVtKSA9PiBpdGVtICE9PSBudWxsKQogICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIHRoaXMuY29tcHV0ZVZhbHVlKCkpCiAgICB9LAogICAgaGFuZGxlQ2xpY2tDbGVhcmFibGUoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgbnVsbCkKICAgIH0sCiAgfSwKfQo="},{"version":3,"sources":["VCascader.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VCascader.vue","sourceRoot":"node_modules/@tookit/vma/lib/components/cascader","sourcesContent":["<template>\n  <v-menu v-model=\"showMenu\" :close-on-content-click=\"false\" offset-y tile>\n    <template #activator=\"{ on, attrs }\">\n      <v-text-field\n        ref=\"text\"\n        v-bind=\"attrs\"\n        :label=\"label\"\n        :placeholder=\"placeholder\"\n        hide-details\n        readonly\n        append-icon=\"mdi-chevron-down\"\n        :value=\"inputValue\"\n        :dense=\"dense\"\n        :outlined=\"outlined\"\n        :clearable=\"clearable\"\n        @click:clear=\"handleClickClearable\"\n        v-on=\"on\"\n      />\n    </template>\n    <v-sheet class=\"d-flex\">\n      <template v-for=\"(children, dep) in childrens\">\n        <v-cascader-item\n          :key=\"dep + 1\"\n          :items=\"children\"\n          :depth=\"dep\"\n          :dense=\"dense\"\n          :value=\"selectedItems[dep]\"\n          :multiple=\"multiple\"\n          :item-text=\"itemText\"\n          :item-value=\"itemValue\"\n          @select=\"handleItemSelect\"\n        />\n      </template>\n    </v-sheet>\n  </v-menu>\n</template>\n<script>\nimport { findPath } from 'n-ary-tree'\nimport { VMenu, VTextField, VSheet } from 'vuetify/lib/components/'\nimport VCascaderItem from './VCascaderItem.vue'\nexport default {\n  name: 'VCascader',\n  components: {\n    VMenu,\n    VTextField,\n    VSheet,\n    VCascaderItem,\n  },\n  props: {\n    items: Array,\n    label: String,\n    placeholder: String,\n    name: String,\n    dense: Boolean,\n    outlined: Boolean,\n    multiple: Boolean,\n    clearable: Boolean,\n    returnObject: Boolean,\n    childrenKey: {\n      type: String,\n      default: 'children',\n    },\n    seperator: {\n      type: String,\n      default: ' / ',\n    },\n    itemText: {\n      type: String,\n      default: 'text',\n    },\n    itemValue: {\n      type: String,\n      default: 'value',\n    },\n    value: {\n      type: [Array, Number, String],\n      default: () => [],\n    },\n  },\n  data() {\n    return {\n      showMenu: false,\n      currentDepth: 0,\n      selectedItems: [],\n      childrens: [this.items], // [[],[]]\n    }\n  },\n  computed: {\n    inputValue() {\n      const input = this.selectedItems\n        .filter((item) => item !== null)\n        .map((item) => item[this.itemText])\n        .join(this.seperator)\n      return input\n    },\n  },\n  watch: {\n    value: {\n      handler(val) {\n        this.initValue(val)\n      },\n      deep: true,\n      immediate: true,\n    },\n  },\n  methods: {\n    initValue(val) {\n      this.selectedItems = this.findPath(val)\n    },\n\n    findPath(val) {\n      if (val) {\n        let path = []\n        this.items.forEach((item) => {\n          const temp = findPath(item, val, {\n            value: this.itemValue,\n            children: this.childrenKey,\n          })\n          if (temp.length > 0) {\n            path = temp\n          }\n        })\n        return path\n      } else {\n        return []\n      }\n    },\n    computeValue() {\n      const value = this.multiple\n        ? this.selectedItems.map((item) => item[this.itemValue])\n        : this.selectedItems[this.selectedItems.length - 1][this.itemValue]\n      return value\n    },\n    // rebuild\n    handleItemSelect({ item, depth }) {\n      const childrens = item[this.childrenKey]\n      this.$set(this.selectedItems, depth, item)\n      // reset all grand child\n      const grandDep = depth + 1\n      this.$set(this.childrens, grandDep, childrens) // make array reactive\n      for (let i = 0; i < this.childrens.length; i++) {\n        if (i > grandDep) {\n          this.childrens[i] = []\n        }\n      }\n      this.childrens = this.childrens.filter((item) => item && item.length > 0)\n      for (let i = 0; i < this.selectedItems.length; i++) {\n        if (i > depth) {\n          this.selectedItems[i] = null\n        }\n      }\n      this.selectedItems = this.selectedItems.filter((item) => item !== null)\n      this.$emit('input', this.computeValue())\n    },\n    handleClickClearable() {\n      this.$emit('input', null)\n    },\n  },\n}\n</script>\n"]}]}